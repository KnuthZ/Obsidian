#### Синтаксис

```
\begin{<type>}[options]
...
\end{<type>}
```

---

#### Теория: вертикальные и горизонтальные отступы в списках

**Вертикальные отступы**

- `topsep` — расстояние между списком и окружающим текстом.
- `partopsep` — дополнительный отступ перед списком, если перед ним есть пустая строка.
- `parsep` — расстояние между абзацами внутри элемента списка (если `\par` используется внутри элемента).
- `itemsep` — расстояние между элементами списка.

**Горизонтальные отступы**

- `leftmargin` — расстояние от левого края до начала текста внутри списка (обычно отступает весь список).
- `rightmargin` — расстояние от правого края до конца текста списка.
- `listparindent` — отступ первой строки абзаца внутри элемента списка.
- `labelwidth` — ширина метки (`1.`, `a)`, `•` и т. д.).
- `labelsep` — расстояние между меткой (`1.`) и текстом элемента.
- `itemindent` — отступ всей строки элемента (включая метку).

---

#### Основные команды

```
\setlist[<type>]{<format>}
\setlist[<type>,<levels>]{<format>}
\setlist[<levels>]{<format>}
```

Используется для настройки стиля списков глобально. Например:
```
\setlist[itemize]{leftmargin=2em, itemsep=1ex}
\setlist[enumerate,1]{label=\arabic*), leftmargin=4em}
\setlist[description]{labelwidth=2cm, labelsep=0.5em}
```

- `[itemize]` — указывает, что настройки применяются к `itemize`.
- `[enumerate,1]` — настройки для первого уровня `enumerate`.
- `[description]` — настройки для `description`.

---

```
\newlist{<name>}{<type>}{<max-depth>}
\renewlist{<name>}{<type>}{<max-depth>}
```

Используется для создания нового типа списка. Переопределения существуещего списка.

```
\newlist{mylist}{enumerate}{1}
\setlist[mylist]{label=\Roman*)}
```

- `mylist` — имя нового списка.
- `{enumerate}` — базируется на `enumerate` (может быть `itemize` или `description`).
- `{1}` — количество уровней (например, `{3}` для трёхуровневого списка).

---

#### Форматирование меток и ссылок

- `label=<commands>` — задание метки

Определяет, как выглядят метки (`1.`, `a)`, `•` и т. д.).

```
\begin{enumerate}[label=\arabic*)]
  \item Первый
  \item Второй
\end{enumerate}
```

Это создаст нумерацию:  
**1) 2) 3)**

Можно использовать:

- `\alph*` → `a, b, c`
- `\Alph*` → `A, B, C`
- `\arabic*` → `1, 2, 3`
- `\roman*` → `i, ii, iii`
- `\Roman*` → `I, II, III`

---

- `label*=<commands>` — вложенные метки

Добавляет уровень нумерации от родительского списка.

```
\begin{enumerate}[label=\arabic*., label*=\arabic*.]
  \item Первый
  \begin{enumerate}
    \item Подпункт
    \item Подпункт
  \end{enumerate}
\end{enumerate}
```

Результат:

1. Первый  
    1.1. Подпункт  
    1.2. Подпункт

---

- `ref=<commands>` — формат перекрёстных ссылок

Определяет, как выглядит `\ref{}` на элемент списка.

```
\begin{enumerate}[label=\arabic*), ref=\arabic*]
  \item Первый \label{first}
\end{enumerate}

См. пункт \ref{first}.
```

Теперь `\ref{first}` вернёт `1`, без круглых скобок. Если использовать `label=\arabic*)`, то без `ref` `\ref{first}` вернёт `1)`, а с `ref=\arabic*` — просто `1`.

---

- `font=<commands>` и `format=<commands>`

Эти параметры задают шрифт метки элемента списка.

Пример использования:
```
\begin{enumerate}[font=\bfseries]
    \item Первый пункт
    \item Второй пункт
\end{enumerate}
```

В этом примере метки элементов (`1., 2., ...`) будут выделены полужирным.

---

- `align=left | right | parleft`

Определяет выравнивание метки относительно её боксового контейнера.

- `left` — выравнивание по левому краю метки.
- `right` — выравнивание по правому краю метки (значение по умолчанию).
- `parleft` — метка становится `\parbox` заданной ширины (`\labelwidth`), а её содержимое выравнивается влево.

---

#### Распределение горизонтального пространства

Горизонтальное пространство слева от элемента списка определяется уравнением:
$$\large\text{labelindent}+\text{labelwidth}+\text{labelsep}−\text{itemindent}=\text{leftmargin}$$

Где:

- `labelindent` — отступ от левого края к началу метки.
- `labelwidth` — ширина метки.
- `labelsep` — расстояние между меткой и текстом.
- `itemindent` — отступ первой строки элемента списка.
- `leftmargin` — общее расстояние от левого края страницы до текста.

---

- `labelindent=<length>`

Определяет отступ между левым краем списка (или вложенного списка) и началом метки.

Пример использования:
```
\begin{enumerate}[labelindent=1cm, leftmargin=*]
    \item Первый пункт
    \item Второй пункт
\end{enumerate}
```

В этом примере метки элементов начнутся на 1 см правее относительно левого края.

---

- `left=<labelindent>` и `left=<labelindent> .. <leftmargin>`

Этот параметр позволяет задавать сразу два значения: начало метки и начало текста.

Пример использования с диапазоном:
```
\begin{enumerate}[left=\parindent .. 2\parindent]
    \item Первый пункт
    \item Второй пункт
\end{enumerate}
```

Здесь метка начнётся на уровне `\parindent`, а текст – на `2\parindent`.

---

#### Опции вычисления параметров

В `enumitem` можно указывать, какой параметр должен быть вычислен автоматически. Это делают с помощью `!` и `*`.

#### Опции:

- `leftmargin=!` — `leftmargin` вычисляется из других параметров.
- `itemindent=!` — `itemindent` вычисляется из других параметров.
- `labelsep=!` — `labelsep` вычисляется из других параметров.
- `labelwidth=!` — `labelwidth` вычисляется из других параметров.
- `labelindent=!` — `labelindent` вычисляется из других параметров.

> **Примечание:** если `align=right` (по умолчанию), то `labelindent=!` и `labelwidth=!` работают схоже.

- `leftmargin=*` — `leftmargin` вычисляется динамически в зависимости от ширины метки.
- `itemindent=*` — `itemindent` вычисляется динамически.
- `labelsep=*` — `labelsep` устанавливается автоматически.
- `labelwidth=*` — то же самое, что `labelwidth=!`.
- `labelindent=*` — `labelindent` определяется автоматически.

> ⚠️ `labelwidth=*` и `labelwidth=!` синонимичны, но могут принимать отрицательные значения (выдается предупреждение).

**Примеры использования:**

Автоматический `leftmargin` и `labelsep`

```
\begin{itemize}[label=\textbullet, leftmargin=*, labelsep=*]
\item Первый пункт.
\item Второй пункт.
\end{itemize}
```

Здесь `leftmargin=*` позволяет автоматически выставить отступ слева, а `labelsep=*` – расстояние между меткой и текстом.

Автоматический `labelindent` и `leftmargin`

```
\begin{enumerate}[label=\arabic*., labelindent=\parindent, leftmargin=2\parindent, labelsep=*]
\item Первый пункт.
\item Второй пункт.
\end{enumerate}
```

Здесь:

- `labelindent=\parindent` — сдвиг меток на стандартный отступ абзаца.
- `leftmargin=2\parindent` — отступ от левого края.
- `labelsep=*` — автоматическое расстояние между меткой и текстом.

**Зачем использовать `*` и `!`?**

- `!` используется, когда параметр должен быть вычислен из других.
- `*` используется, когда параметр должен адаптироваться динамически.

Если нужно, чтобы текст всегда начинался на фиксированной позиции, используют `labelsep=*`. Если `leftmargin` должен адаптироваться под метки, используют `leftmargin=*`.

Этот подход дает гибкость при настройке списков, особенно когда используется разная длина меток.

---

- `widest=<string>` и `widest*=<integer>`

Используется для автоматического вычисления `labelwidth`, чтобы учесть наибольшую по ширине метку.

Пример использования:
```
\begin{enumerate}[leftmargin=*, widest=iii]
    \item Первый пункт
    \item Второй пункт
\end{enumerate}
```

Здесь ширина метки (`labelwidth`) будет рассчитана так, чтобы вместить `iii`.

---

- `labelsep*=<length>`

Работает аналогично `labelsep`, но значение рассчитывается относительно `leftmargin`.

Пример использования:
```
\begin{enumerate}[labelsep*=1cm]
    \item Первый пункт
    \item Второй пункт
\end{enumerate}
```

В этом примере расстояние между меткой и текстом всегда будет 1 см.

---

- `labelindent*=<length>`

Аналогично `labelindent`, но рассчитывается относительно `leftmargin`.

Пример использования:
```
\begin{enumerate}[labelindent*=2cm]
    \item Первый пункт
    \item Второй пункт
\end{enumerate}
```

Здесь метка будет отступать на 2 см от левого края.

---

#### Injecting code (вставка кода в списки)

Эти команды позволяют вставлять код перед началом или после окончания списка.

- `before=<code>` — выполняет код перед началом списка, заменяя предыдущее значение.
- `before*=<code>` — выполняет код перед началом списка, добавляя его к предыдущему значению.
- `after=<code>` — выполняет код перед окончанием списка, заменяя предыдущее значение.
- `after*=<code>` — выполняет код перед окончанием списка, добавляя его к предыдущему значению.
- `first=<code>` — выполняет код внутри тела списка перед первым элементом, заменяя предыдущее значение.
- `first*=<code>` — выполняет код внутри тела списка перед первым элементом, добавляя его к предыдущему значению.

Пример:
`\setlist{leftmargin=*, before=\setlength{\rightmargin}{\leftmargin}}`

Здесь перед началом списка правая граница (`\rightmargin`) устанавливается равной левой (`\leftmargin`).

---

#### Стиль списков `description`

Включается только для окружения `description`. Позволяет управлять выравниванием и оформлением меток.

- `style=standard` — стандартный стиль, метка помещается в прямоугольную рамку. Устанавливает `itemindent=!`.
- `style=unboxed` — как `standard`, но без рамки вокруг метки (для более ровного выравнивания).
- `style=nextline` — если метка слишком длинная, то текст переносится на новую строку.
- `style=sameline` — если метка не влезает, текст продолжается на той же строке.
- `style=multiline` — метка размещается в `parbox`, может занимать несколько строк.

**Важно:**

- Смешивание `boxed` и `unboxed` меток может привести к некорректному отображению.
- Вложенные списки со стилем `nextline` могут работать нестабильно.

Пример:
```
\begin{description}[style=nextline]
    \item[Очень длинное название] Описание, начинающееся на новой строке.
\end{description}
```

---

**Компактные списки**

- `noitemsep` — убирает отступы между элементами списка (`itemsep=0pt, parsep=0pt`).
- `nosep` — убирает все вертикальные отступы.

---

**Широкие списки (wide)**

- `wide` — метки становятся частью текста, а не выделяются отдельно.
- `wide=<parindent>` — дополнительно позволяет задать отступ перед списком.

Эквивалентно:
```
align=left, leftmargin=0pt, labelindent=\parindent,
listparindent=\parindent, labelwidth=0pt, itemindent=!
```

---
**Короткие метки (shortlabels)**

Добавляет совместимость с пакетом `enumerate` и позволяет указывать стиль нумерации списков через короткие обозначения:

- `A` → `\Alph*`
- `a` → `\alph*`
- `I` → `\Roman*`
- `i` → `\roman*`
- `1` → `\arabic*`

Пример:
```
\begin{enumerate}[i), labelindent=\parindent, labelsep=*]
    \item Первый пункт
    \item Второй пункт
\end{enumerate}
```

Этот список будет нумероваться как `i), ii), iii) ...`.